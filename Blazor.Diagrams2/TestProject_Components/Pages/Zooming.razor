@page "/zooming"
<SourceCodeLink Repository="Blazor.Diagrams" Page="@(nameof(Zooming))" />
<div style="display:grid; grid-template-rows: auto auto auto 1fr; height: 100%;">
    <div style="grid-row: 1">Disabled: <input type="checkbox" @bind-value="disabled" /></div>
    <div style="grid-row: 2">Inverted: <input type="checkbox" @bind-value="inversed" /></div>
    <div style="grid-row: 3"><button @onclick="(_) => diagram?.ZoomToFit()">Zoom to fit</button></div>

    <Diagram @ref="diagram" style="grid-row: 4">
        <Nodes>
            <RectangleNode Id="n1" @bind-X="n1p.X" @bind-Y="n1p.Y">
                <div style="width:4em; height:3em; text-align: center;"></div>
            </RectangleNode>
            <EllipseNode Id="n2" @bind-X="n2p.X" @bind-Y="n2p.Y">
                <div style="width:4em; height:3em; text-align: center;"></div>
            </EllipseNode>
            <DiamondNode Id="n3" @bind-X="n3p.X" @bind-Y="n3p.Y">
                <div style="width:4em; height:3em; text-align: center;"></div>
            </DiamondNode>
            <RectangleNode Id="n4" @bind-X="n4p.X" @bind-Y="n4p.Y">
                <div style="width:4em; height:3em; text-align: center;"></div>
            </RectangleNode>
            <RectangleNode Id="n5" @bind-X="n5p.X" @bind-Y="n5p.Y">
                <div style="width:4em; height:3em; text-align: center;"></div>
            </RectangleNode>
            <RectangleNode Id="n6" @bind-X="n6p.X" @bind-Y="n6p.Y">
                <div style="width:4em; height:3em; text-align: center;"></div>
            </RectangleNode>
        </Nodes>
        <Links>
            <Link Source="l1s" Target="l1t" Arrow="Arrow.None" />
            <Link Source="l2s" Target="l2t" Arrow="Arrow.Target" />
            <Link Source='"n5"' Target="@(("n6", Position.Left))" />
        </Links>
        <OverviewSettings Position="Position.BottomRight" />
        <NavigationSettings DisableZooming="disabled" InversedZoom="inversed" />
    </Diagram>
</div>
@code {
    private Diagram diagram;
    private bool disabled {get;set;}
    private bool inversed {get;set;}
    private Point n1p = new Point(100, 100);
    private Point n2p = new Point(200, 100);
    private Point n3p = new Point(200, 200);
    private Point n4p = new Point(1000, -800);
    private Point n5p = new Point(-100, -800);
    private Point n6p = new Point(-1000, 800);
    private NodeAnchor l1s = new NodeAnchor { NodeId = "n1", Port = Position.Right };
    private NodeAnchor l1t = new NodeAnchor { NodeId = "n2", Port = Position.Left };
    private NodeAnchor l2s = new NodeAnchor { NodeId = "n1", Port = Position.BottomRight };
    private NodeAnchor l2t = new NodeAnchor { NodeId = "n3", Port = Position.TopLeft };
}
